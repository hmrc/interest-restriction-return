{
  "description": "Details of the calculation elections made by the group",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "groupRatio",
    "interestAllowanceAlternativeCalculation",
    "interestAllowanceNonConsolidatedInvestment",
    "interestAllowanceConsolidatedPartnership"
  ],
  "properties": {
    "groupRatio": {
      "description": "Required.",
      "type": "object",
      "additionalProperties": false,
      "required": [
        "isElected"
      ],
      "properties": {
        "isElected": {
          "description": "Indicate if the group has elected to use the group ratio calculation. If this is false then fixed ratio is used",
          "type": "boolean"
        },
        "groupRatioBlended": {
          "description": "Optional.",
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "isElected": {
              "description": "Indicate if the group has elected to use the group ratio blended calculation. Can only be elected if group ratio is elected",
              "type": "boolean"
            },
            "investorGroups": {
              "description": "List the investor groups to which the group ratio blended election relates. Can only be supplied if group ratio blended is elected",
              "type": "array",
              "minItems": 1,
              "items": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "groupName": {
                    "$ref": "../definitions/definitions.json#/definitions/globalCompanyNameType"
                  },
                  "elections": {
                    "description": "The elections made by this investor group",
                    "type": "array",
                    "maxItems": 5,
                    "items": {
                      "type": "string",
                      "enum": [
                        "groupRatioBlended",
                        "groupEBITDA",
                        "interestAllowanceAlternativeCalculation",
                        "interestAllowanceNonConsolidatedInvestment",
                        "interestAllowanceConsolidatedPartnership"
                      ]
                    }
                  }
                },
                "required": [
                  "groupName"
                ]
              }
            }
          },
          "required": [
            "isElected"
          ]
        },
        "groupEBITDAChargeableGains": {
          "description": "Indicate if the group has elected to use the group EBITDA chargeable gains election. Can only be elected if group ratio is elected",
          "type": "boolean"
        }
      }
    },
    "interestAllowanceAlternativeCalculation": {
      "description": "Indicate if the group has elected to use the Interest Allowance Alternative Calculation election",
      "type": "boolean"
    },
    "interestAllowanceNonConsolidatedInvestment": {
      "description": "Required.",
      "type": "object",
      "additionalProperties": false,
      "required": [
        "isElected"
      ],
      "properties": {
        "isElected": {
          "description": "Indicate if the group has elected to use the Interest Allowance Non-Consolidated Investment election",
          "type": "boolean"
        },
        "nonConsolidatedInvestments": {
          "description": "List the investors",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "investmentName": {
                "description": "Investment name",
                "$ref": "../definitions/definitions.json#/definitions/explanatoryNotesShort"
              }
            },
            "required": [
              "investmentName"
            ]
          }
        }
      }
    },
    "interestAllowanceConsolidatedPartnership": {
      "description": "Required.",
      "type": "object",
      "additionalProperties": false,
      "required": [
        "isElected"
      ],
      "properties": {
        "isElected": {
          "description": "Indicate if the group has elected to use the Interest Allowance Consolidated Partnership election",
          "type": "boolean"
        },
        "consolidatedPartnerships": {
          "description": "List the partnerships",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "partnershipName": {
                "description": "Partnership name",
                "$ref": "../definitions/definitions.json#/definitions/globalCompanyNameType"
              },
              "sautr": {
                "$ref": "../definitions/definitions.json#/definitions/utrType"
              }
            },
            "required": [
              "partnershipName"
            ]
          }
        }
      }
    }
  }
}