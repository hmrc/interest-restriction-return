{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "agentDetails": {
      "type": "object",
      "properties": {
        "agentActingOnBehalfOfCompany": {
          "type": "boolean"
        },
        "agentName": {
          "$ref": "definitions.json#/definitions/agentName"
        }
      },
      "required": [
        "agentActingOnBehalfOfCompany"
      ],
      "additionalProperties": false
    },
    "isReportingCompanyUltimateParent": {
      "type": "boolean"
    },
    "parentCompany": {
      "type": "object",
      "oneOf": [
        {
          "type": "object",
          "properties": {
            "ultimateParent": {
              "type": "object",
              "oneOf": [
                {
                  "properties": {
                    "registeredCompanyName": {
                      "$ref": "definitions.json#/definitions/companyName"
                    },
                    "knownAs": {
                      "$ref": "definitions.json#/definitions/companyName"
                    },
                    "utr": {
                      "$ref": "definitions.json#/definitions/utr"
                    },
                    "crn": {
                      "$ref": "definitions.json#/definitions/crn"
                    },
                    "otherUkTaxReference": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "registeredCompanyName",
                    "utr",
                    "crn"
                  ]
                },
                {
                  "properties": {
                    "registeredCompanyName": {
                      "$ref": "definitions.json#/definitions/companyNameNonUk"
                    },
                    "knownAs": {
                      "$ref": "definitions.json#/definitions/companyNameNonUk"
                    },
                    "countryOfIncorporation": {
                      "$ref": "countrycodes.json#/definitions/countryCode"
                    },
                    "crn": {
                      "$ref": "definitions.json#/definitions/crnNonUk"
                    }
                  },
                  "required": [
                    "registeredCompanyName",
                    "crn",
                    "countryOfIncorporation"
                  ]
                }
              ]
            }
          },
          "required": [
            "ultimateParent"
          ],
          "additionalProperties": false
        },
        {
          "type": "object",
          "properties": {
            "deemedParent": {
              "type": "array",
              "minItems": 1,
              "maxItems": 3,
              "items": {
                "type": "object",
                "properties": {
                  "companyName": {
                    "$ref": "definitions.json#/definitions/companyNameNonUk"
                  },
                  "utr": {
                    "$ref": "definitions.json#/definitions/utr"
                  }
                },
                "required": [
                  "companyName"
                ],
                "additionalProperties": false
              }
            }
          },
          "required": [
            "deemedParent"
          ],
          "additionalProperties": false
        }
      ]
    },
    "groupCompanyDetails": {
      "properties": {
        "totalCompanies": {
          "type": "integer",
          "minimum": 1
        },
        "inclusionOfNonConsentingCompanies": {
          "type": "boolean"
        },
        "accountingPeriod": {
          "properties": {
            "startDate": {
              "type": "string",
              "format": "date"
            },
            "endDate": {
              "type": "string",
              "format": "date"
            }
          },
          "required": [
            "startDate",
            "endDate"
          ]
        }
      },
      "required": [
        "totalCompanies",
        "inclusionOfNonConsentingCompanies",
        "accountingPeriod"
      ],
      "additionalProperties": false
    },
    "submissionType": {
      "type": "string",
      "enum": [
        "original",
        "revised"
      ]
    },
    "revisedReturnDetails": {
      "type": "string",
      "minLength": 1
    },
    "ukCompanies": {
      "properties": {
        "companyName": {
          "$ref": "definitions.json#/definitions/companyName"
        },
        "utr": {
          "$ref": "definitions.json#/definitions/utr"
        }
      },
      "required": [
        "companyName",
        "utr"
      ],
      "additionalProperties": false
    }
  },
  "required": [
    "agentDetails",
    "isReportingCompanyUltimateParent",
    "parentCompany",
    "submissionType"
  ],
  "additionalProperties": false
}